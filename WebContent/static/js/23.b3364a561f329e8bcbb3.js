webpackJsonp([23],{533:function(e,t,a){a(779);var s=a(132)(a(607),a(721),null,null);e.exports=s.exports},607:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{hostUrl:"/VR",activePane:"modify",data:{code:200,statistic:[]},display_submit:!1,display_del:!1,dynamicValidateForm:{domains:[]},ques_data:{questions:[]},pro_type:{opts:[{label:"a",value:"a"}],value:""},ques_type:{opts:[{label:"b",value:"b"}],value:""},questionname:""}},methods:{codeParsing:function(e){var t=this,a=function(e,a){t.$message({title:e,message:a,type:"error"})};switch(e){case-1:a("系统错误","未知错误，请上报管理员");break;case 201:a("输入域错误","验证码错误");break;case 300:a("输入域错误","邮箱或密码错误");break;case 301:a("权限问题","用户已禁用，请联系管理员");break;case 302:a("权限问题","用户未激活，请去邮箱激活用户");break;case 303:a("注册问题","邮箱已占用，请更改邮箱");break;case 304:a("注册问题","昵称已占用，请更改昵称");break;case 400:a("权限问题","用户未登录，请重新登录");break;case 401:a("权限问题","用户无权访问，请联系管理员");break;case 402:a("操作错误","删除错误,请刷新重试");break;case 500:a("系统错误","未知错误，请上报管理员");break;case 600:a("TIME_OUT","访问超时，请检查网络连接");break;case 700:a("激活错误","非法激活链接，请联系管理员");break;case 800:a("激活错误","用户已被激活，请直接登录")}},tabClick:function(e){var t=this;switch(e.index){case"0":t.getQuestions()}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(""!=t.questionname.trim()){for(var a=[],s=0;s<t.dynamicValidateForm.domains.length;s++)a.push({question:t.dynamicValidateForm.domains[s].value,questiontype:t.dynamicValidateForm.domains[s].type,questionname:t.questionname});console.log(a),t.$axios({url:"/admin/Question/modify",method:"post",baseURL:t.hostUrl,data:a}).then(function(e){t.data.code=e.data.code,200==t.data.code?(t.$message("问卷提交成功！"),t.display_del=!0):t.codeParsing(t.data.code)})}else t.$message("问卷名未填写！")})},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},addDomain:function(){this.dynamicValidateForm.domains.push({value:"",type:"single",key:Date.now()})},getStatistic:function(){var e=this;e.data={statistic:[]},e.$axios({url:"/Answer/statistic?producttype="+e.pro_type.value,method:"get",baseURL:e.hostUrl}).then(function(t){console.log(t.data),e.data.statistic=t.data}).catch(function(e){console.log(e)})},deleteQuestionare:function(){var e=this;console.log("delete"),e.$axios({url:"/Question/deleteQuestionare?questionnariename="+e.questionname,method:"get",baseURL:e.hostUrl}).then(function(t){e.$message("问卷删除成功！"),e.dynamicValidateForm.domains=[],e.display_submit=!1,e.display_del=!1,e.getQuestions()}).catch(function(e){console.log(e)})},addQuestionaire:function(){var e=this;e.questionname="",e.dynamicValidateForm.domains=[],e.dynamicValidateForm.domains.push({value:"",type:"single"}),e.display_submit=!0},sendProType:function(){var e=this;console.log("type"),e.dynamicValidateForm.domains=[],e.questionname=e.ques_type.value,e.$axios({url:"/Question/type?type="+e.ques_type.value,method:"get",baseURL:e.hostUrl}).then(function(t){for(var a=0;a<t.data.length;a++)e.dynamicValidateForm.domains.push({value:t.data[a].question,type:t.data[a].questiontype});console.log(e.dynamicValidateForm.domains),e.display_submit=!0,e.display_del=!0}).catch(function(e){console.log(e)})},getQuestions:function(){var e=this;e.$axios({url:"/Question",method:"get",baseURL:e.hostUrl}).then(function(t){console.log(t.data),e.pro_type.opts=[],e.ques_type.opts=[];for(var a=0;a<t.data.length;a++)e.pro_type.opts.push({value:t.data[a],label:t.data[a]}),e.ques_type.opts.push({value:t.data[a],label:t.data[a]})}).catch(function(e){console.log(e)})}},mounted:function(){this.getQuestions()},created:function(){}}},652:function(e,t,a){t=e.exports=a(58)(void 0),t.push([e.i,".content{float:left;width:70%}.switch{margin-left:10px;margin-right:10px}.hint{font-size:13px;color:#8492a6;margin-bottom:20px}#questions{margin-left:30px}.questionbox{padding:28px;width:800px;margin-top:20px}.single_question{margin:0 0 10px;font-size:17px}.answer{width:100%;padding-left:15px}.radio{width:100%;display:flex}.text{width:20px}.percent{flex:1}.selector{width:700px;margin-top:20px;display:flex}.protype_selector{margin-left:50px;float:left}.prosales_selector{margin-left:40px;flex:1}",""])},721:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("div",{staticClass:"list-wrap",attrs:{p:""}},[a("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.activePane,callback:function(t){e.activePane=t},expression:"activePane"}},[a("el-tab-pane",{attrs:{label:"修改问卷",name:"modify"}},[a("p",{staticClass:"hint"},[e._v("*所有修改在点击提交问卷按钮后才生效")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary",icon:"plus"},on:{click:e.addQuestionaire}},[e._v("新建问卷")]),e._v(" "),a("div",{staticClass:"selector",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"protype_selector"},[a("el-select",{attrs:{placeholder:"请选择问卷"},on:{change:function(t){e.sendProType()}},model:{value:e.ques_type.value,callback:function(t){e.ques_type.value=t},expression:"ques_type.value"}},e._l(e.ques_type.opts,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.display_submit,expression:"display_submit"}],staticClass:"prosales_selector"},[a("el-input",{staticStyle:{width:"200"},attrs:{placeholder:"请输入问卷名"},model:{value:e.questionname,callback:function(t){e.questionname=t},expression:"questionname"}})],1)]),e._v(" "),a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[e._l(e.dynamicValidateForm.domains,function(t,s){return a("el-form-item",{key:t.key,attrs:{label:"问题"+(s+1),prop:"domains."+s+".value",rules:{required:!0,message:"问题不能为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.value,callback:function(e){t.value=e},expression:"domain.value"}}),e._v(" "),a("el-switch",{staticClass:"switch",attrs:{width:"75","on-value":"single","off-value":"essay","on-text":"单选题","off-text":"问答题","on-color":"#13ce66","off-color":"#ff4949"},model:{value:t.type,callback:function(e){t.type=e},expression:"domain.type"}}),e._v(" "),a("el-button",{on:{click:function(a){a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)}),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.display_submit,expression:"display_submit"}],attrs:{type:"primary"},on:{click:function(t){e.submitForm("dynamicValidateForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.display_submit,expression:"display_submit"}],on:{click:e.addDomain}},[e._v("新增问题")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.display_del,expression:"display_del"}],attrs:{plain:!0,type:"danger"},on:{click:e.deleteQuestionare}},[e._v("删除问卷")])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"问卷结果统计",name:"statistic"}},[a("div",{staticClass:"selector"},[a("div",{staticClass:"protype_selector"},[a("el-select",{attrs:{placeholder:"请选择问卷"},on:{change:function(t){e.getStatistic()}},model:{value:e.pro_type.value,callback:function(t){e.pro_type.value=t},expression:"pro_type.value"}},e._l(e.pro_type.opts,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticClass:"questionbox"},[a("form",{attrs:{id:"questions"}},e._l(e.data.statistic,function(t,s){return a("div",{staticStyle:{"margin-bottom":"20px"}},[a("p",{staticClass:"single_question"},[e._v(e._s("问题"+(s+1)+". "+t.question))]),e._v(" "),a("div",{staticClass:"answer"},[a("div",{staticClass:"radio"},[a("div",{staticClass:"text"},[e._v("是")]),e._v(" "),a("div",{staticClass:"percent"},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.onePercentage}})],1)]),e._v(" "),a("div",{staticClass:"radio"},[a("div",{staticClass:"text"},[e._v("否")]),e._v(" "),a("div",{staticClass:"percent"},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.twoPercentage,status:"exception"}})],1)])])])}))])])],1)],1)])],1)},staticRenderFns:[]}},779:function(e,t,a){var s=a(652);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(133)("4e6acc48",s,!0)}});