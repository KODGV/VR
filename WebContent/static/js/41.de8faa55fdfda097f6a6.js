webpackJsonp([41],{513:function(t,e,a){a(776);var i=a(132)(a(587),a(715),"data-v-4ab87b78",null);t.exports=i.exports},587:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(189),l=i(o),s=a(188),n=i(s);e.default={components:{VueImgInputer:l.default,quilEditor:n.default},data:function(){return{hostURL:"/VR",imgSrc:"",subSuccess:!1,edit:!0,e_id:null,userId:null,picValue:null,picTitle:"",title:null,quillEditor:null,editorOption:{modules:{toolbar:[[{header:[2,3,!1]}],["bold","italic"],[{list:"ordered"},{list:"bullet"}],["image"]]},placeholder:"请编写您的媒体自媒体测评..."}}},methods:{codeParsing:function(t){var e=this,a=function(t,a){e.$notify({title:t,message:a,type:"error"})};switch(t){case-1:a("系统错误","未知错误，请上报管理员");break;case 201:a("输入域错误","验证码错误");break;case 300:a("输入域错误","邮箱或密码错误");break;case 301:a("权限问题","用户已禁用，请联系管理员");break;case 302:a("权限问题","用户未激活，请去邮箱激活用户");break;case 303:a("注册问题","邮箱已占用，请更改邮箱");break;case 304:a("注册问题","昵称已占用，请更改昵称");break;case 401:a("权限问题","用户无权访问，请联系管理员");break;case 402:a("操作错误","删除错误,请刷新重试");break;case 415:a("操作错误","文件类型错误，请上传正确文件类型");break;case 500:a("系统错误","未知错误，请上报管理员");break;case 600:a("TIME_OUT","访问超时，请检查网络连接");break;case 700:a("激活错误","非法激活链接，请联系管理员");break;case 800:a("激活错误","用户已被激活，请直接登录");break;case 1e3:a("系统错误","参数错误，上报管理员");break;case 1001:a("权限问题","用户未登录，请重新登录");break;case 1002:a("系统错误","参数错误，上报管理员")}},fileChange:function(t,e){var a=this,i=this;console.log("picValue:",t),console.log("FileName:",e),console.log(t.imgSrc);var o=new FormData;o.append("file",t),i.$axios({url:"/upload",method:"post",baseURL:i.hostURL,data:o}).then(function(t){a.picTitle=t.data.object,console.log(a.picTitle)}).catch(function(t){console.log(t)})},subMse:function(){var t=this;if(t.title&&t.quillEditor&&t.picTitle){var e={evaluationId:t.e_id,titlePic:t.picTitle,evaluationTitle:t.title,authorId:t.userId,evaluationText:{evaluationBody:t.quillEditor},postTime:Date.parse(new Date)};console.log(e),t.$axios({url:"/admins/evaluations/evaluation",method:"put",baseURL:t.hostURL,data:e}).then(function(e){console.log(e.data.object),t.$notify({title:"成功！",message:"成功修改测评。",type:"success"}),t.$router.push("/admin/mseAdminView?"+t.e_id)}).catch(function(e){console.log(e),t.codeParsing(e.response.status)})}else t.$notify({title:"提示！",message:"请填写媒体自评测的标题、标题图片及（或）文章内容后再进行提交。",type:"error"})},getMseData:function(t){var e=this;e.$axios({url:"/evaluations/"+t,method:"GET",baseURL:e.hostURL}).then(function(t){var a=t.data.object.evaluation;console.log(a),e.picTitle=a.titlePic,e.imgSrc=a.titlePic,e.quillEditor=a.evaluationText,e.title=a.evaluationTitle,e.userId=a.authorId}).catch(function(t){e.codeParsing(t.response.status),console.log(t.response.status)})}},computed:{},mounted:function(){var t=this,e=location.href.split("?"),a=e[1];t.e_id=a,t.getMseData(a)}}},647:function(t,e,a){e=t.exports=a(58)(void 0),e.push([t.i,".vii div[data-v-4ab87b78]{margin:0 auto;display:block}.vii div div img[data-v-4ab87b78]{max-width:710px;max-height:300px}.title input[data-v-4ab87b78]{width:645px;font-size:24px;font-weight:400;color:#999;margin-top:20px;padding-right:0;line-height:36px;float:left;border:0}.ql[data-v-4ab87b78],.title[data-v-4ab87b78],.vii[data-v-4ab87b78]{margin-bottom:20px}.step[data-v-4ab87b78]{color:#5a5a5a}.subBtn[data-v-4ab87b78]{width:90px;height:34px;text-align:center;line-height:34px;color:#fff;background-color:#5a5a5a;border:0;margin-right:15px;font-size:14px;float:left}.active[data-v-4ab87b78]{background-color:#5188a6;cursor:pointer}",""])},715:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-date"}),t._v("管理员")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:"/admin/mseAdmin"}},[t._v("评测自媒体管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("评测自媒体文章编辑")])],1)],1),t._v(" "),t.edit?a("div",[a("el-row",{staticClass:"vii"},[a("form",{attrs:{method:"POST",action:"/VR/upload"}},[a("h3",{staticClass:"step"},[t._v("1.标题图像")]),t._v(" "),a("VueImgInputer",{ref:"vii",attrs:{imgSrc:t.imgSrc,accept:"image/*",theme:"light",size:"large"},on:{onChange:t.fileChange},model:{value:t.picValue,callback:function(e){t.picValue=e},expression:"picValue"}})],1)]),t._v(" "),a("el-row",{staticClass:"title"},[a("h3",{staticClass:"step"},[t._v("2.评测标题")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticStyle:{outline:"none"},attrs:{type:"text",placeholder:"文章标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),a("el-row",{staticClass:"ql"},[a("h3",{staticClass:"step",staticStyle:{"margin-bottom":"10px"}},[t._v("3.评测内容")]),t._v(" "),a("div",{staticClass:"quill-editor"},[a("quill-editor",{attrs:{red:"quil",options:t.editorOption},model:{value:t.quillEditor,callback:function(e){t.quillEditor=e},expression:"quillEditor"}})],1)]),t._v(" "),a("el-row",[a("input",{staticClass:"subBtn active",attrs:{type:"button",value:"提交"},on:{click:function(e){t.subMse()}}})])],1):a("div",[a("p",[t._v("提交成功～")])])])},staticRenderFns:[]}},776:function(t,e,a){var i=a(647);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(133)("15becb5a",i,!0)}});